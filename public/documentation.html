<!DOCTYPE html>
<html>
<head>
    <title>myFlix Documentation</title>
  <style>
    table {
      border-collapse: collapse;
      width: 100%;
    }
    th, td {
      text-align: left;
      padding: 8px;
    }
    th {
      background-color: #f2f2f2;
    }
    tr:nth-child(even) {
      background-color: #f8f8f8;
    }
  </style>
</head>
<body>
  <h2>API Documentation</h2>
  <table>
    <tr>
      <th>Endpoint</th>
      <th>Method</th>
      <th>Description</th>
      <th>Data Validation</th>
      <th>Authentication Required</th>
    </tr>
    <tr>
      <td>/users</td>
      <td>POST</td>
      <td>Registers a new user</td>
      <td>
        <ul>
          <li>Username is required and must be at least 5 characters long</li>
          <li>Username must contain alphanumeric characters only</li>
          <li>Password is required</li>
          <li>Email must be a valid email address</li>
        </ul>
      </td>
      <td>Yes</td>
    </tr>
    <tr>
      <td>/users/:Username</td>
      <td>PUT</td>
      <td>Updates a user's information</td>
      <td>
        <ul>
          <li>Username is required and must be at least 5 characters long</li>
          <li>Username must contain alphanumeric characters only</li>
          <li>Password is required</li>
          <li>Email must be a valid email address</li>
        </ul>
      </td>
      <td>Yes</td>
    </tr>
    <tr>
      <td>/users/:Username</td>
      <td>DELETE</td>
      <td>Deletes a user</td>
      <td>N/A</td>
      <td>Yes</td>
    </tr>
    <tr>
      <td>/users/:Username/movies/:MovieID</td>
      <td>POST</td>
      <td>Adds a movie to a user's favoriteMovies</td>
      <td>N/A</td>
      <td>Yes</td>
    </tr>
    <tr>
      <td>/users/:Username/movies/:MovieID</td>
      <td>DELETE</td>
      <td>Removes a movie from a user's favoriteMovies</td>
      <td>N/A</td>
      <td>Yes</td>
    </tr>
    <tr>
      <td>/users</td>
      <td>GET</td>
      <td>Gets all users</td>
      <td>N/A</td>
      <td>Yes</td>
    </tr>
    <tr>
      <td>/users/:Username</td>
      <td>GET</td>
      <td>Gets a user by username</td>
      <td>N/A</td>
      <td>Yes</td>
    </tr>
    <tr>
      <td>/movies</td>
      <td>GET</td>
      <td>Gets all movies</td>
      <td>N/A</td>
      <td>Yes</td>
    </tr>
    <tr>
      <td>/movies/:title</td>
      <td>GET</td>
      <td>Gets a movie by title</td>
      <td>N/A</td>
      <td>Yes</td>
    </tr>
    <tr>
      <td>/movies/genre/:genreName</td>
      <td>GET</td>
      <td>Gets movies by genre</td>
      <td>N/A</td>
      <td>Yes</td>
    </tr>
    <tr>
      <td>/movies/directors/:directorName</td>
      <td>GET</td>
      <td>Gets data about a director</td>
      <td>N/A</td>
      <td>Yes</td>
    </tr>
  </table>
</body>
</html>


<!--<!DOCTYPE html>
<head>
    <title>Movie API</title>
</head>

<body>
    <p>
        <h1>Documentation</h1>
        <h2>Description:</h2>
        This is my first body of work <br> 
        with server-side code and building an API<br> 
        (specifically, a REST API).<br> 
        I built this web app with node.js and JavaScript.<br>
        The app provides users with some details<br>
        about different movies, directors, and genres.
    </p>
    <p>
        <h2>Endpoint Map</h2><br>
        <div>
            <h3>Movies:</h3>
    
            <h4>Endpoint: '/movies'</h4>  
            <ul>
                <li>Method: GET</li>
                <li>Logic: Gets all Movies</li>
                <li>Parameters: None</li>
                <li>Mongoose Query: 
                    app.get('/movies', (req, res) => {
                        Movies.find()
                </li>
                <li>Data expected in request body:</li>
                <p>None</p>
                <li>Data expected in response:</li>
                <p>A JSON object of all the movies</p>
            </ul>


            <h4>Endpoint: '/movies/:title'</h4>  
            <ul>
                <li>Method: GET</li>
                <li>Logic: Gets movie by title</li>
                <li>Parameters: title</li>
                <li>Mongoose Query: 
                    app.get('/movies/:title', (req, res) => {
                        const { title } = req.params;
                        Movies.findOne({ Title: title })
                </li>
                <li>Data expected in request body:</li>
                <p>None</p>
                <li>Data expected in response:</li>
                <p>A JSON object a specific movie</p>
            </ul>



            <h4>Endpoint: '/movies/genre/:genreName'</h4>  
            <ul>
                <li>Method: GET</li>
                <li>Logic: Gets movies by genre</li>
                <li>Parameters: genreName</li>
                <li>Mongoose Query: 
                    app.get('/movies/genre/:genreName', (req, res) => {
                        Movies.find({ 'Genre.Name': req.params.genreName })
                </li>
                <li>Data expected in request body:</li>
                <p>None</p>
                <li>Data expected in response:</li>
                <p>A JSON object of a specific genre</p>
            </ul>


            <h4>Endpoint: '/movies/directors/:directorName'</h4>  
            <ul>
                <li>Method: GET</li>
                <li>Logic: get data about a director</li>
                <li>Parameters: directorName</li>
                <li>Mongoose Query: 
                    app.get('/movies/directors/:directorName', (req, res) => {
                        Movies.findOne({ 'Director.Name': req.params.directorName })
                </li>
                <li>Data expected in request body:</li>
                <p>None</p>
                <li>Data expected in response:</li>
                <p>A JSON object of a specific director</p>
            </ul>


        </div><br><br>


        <div>    
            <h3>Users:</h3>
                
            <h4>Endpoint: '/users'</h4>  
            <ul>
                <li>Method: POST</li>
                <li>Logic: Registers new user</li>
                <li>Parameters: name</li>
                <li>Mongoose Query: 
                    Users.findOne({ Username: req.body.Username })
                    .then((user) => {
                        if (user) {
                        return res.status(400).send(req.body.Username + 'already exists');
                        } else {
                        Users
                            .create({
                            Username: req.body.Username,
                            Password: req.body.Password,
                            Email: req.body.Email,
                            Birthday: req.body.Birthday
                        })
                </li>
                <li>Data expected in request body:</li>
                <p>JSON object of the new user: {"id": "", "name": "", "favoriteMovies": ""}</p>
                <li>Data expected in response:</li>
                <p>JSON object of the new user: {JSON object of the new user: {"id": "", "name": "", "favoriteMovies": ""}</p>
            </ul>


            <h4>Endpoint: '/users/:Username'</h4>
            <ul>
                <li>Method: PUT</li>
                <li>Logic: Update a user's information by username</li>
                <li>Parameters: Username</li>
                <li>Mongoose Query: 
                    app.get('/users/:Username', (req, res) => {
                        Users.findOne({username: req.params.Username })
                </li>
                <li>Data expected in request body: JSON object with the updated user information:</li>
                <pre>
                {
                    "Username": "NewUsername",
                    "Password": "NewPassword",
                    "Email": "NewEmail",
                    "Birthdate": "NewBirthdate"
                }
                </pre>
                <li>Data expected in response: JSON object containing the updated user information</li>
            </ul>


            <h4>Endpoint: '/users/:id/:movieTitle'</h4>  
            <ul>
                <li>Method: POST</li>
                <li>Logic: Adds movie to favoriteMovies</li>
                <li>Parameters:</li>
                <li>Mongoose Query: 
                    app.post('/users/:Username/movies/:MovieID', async (req, res) => {
                        try {
                          const { Username, MovieID } = req.params;
                      
                          const updatedUser = await Users.findOneAndUpdate(
                </li>
                <ul> 
                    <li>id</li>
                    <li>movieTitle</li>
                </ul>
                <li>Data expected in request body:</li>
                <p>None</p>
                <li>Data expected in response:</li>
                <p>A JSON of the user</p>
            </ul>


            <h4>Endpoint: '/users/:id/:movieTitle'</h4>  
            <ul>
                <li>Method: DELETE</li>
                <li>Logic: Removes movie from favoriteMovies</li>
                <li>Parameters:</li>
                <ul>
                    <li>id</li>
                    <li>movieTitle</li>
                </ul>
                <li>Mongoose Query: 
                    app.delete(
                    '/users/:userName/movies/:MovieID',
                    (req, res) => {
                      Users.findOneAndUpdate(
                        { Username: req.params.userName },
                        {
                          $pull: { FavoriteMovies: req.params.MovieID }
                        },
                        { new: true }
                      )</li>
                <li>Data expected in request body:</li>
                <p>None</p>
                <li>Data expected in response:</li>
                <p>Text that shows the movie has been removed</p>
            </ul>


            <h4>Endpoint: '/users/:id/'</h4>  
            <ul>
                <li>Method: DELETE</li>
                <li>Logic: Unregisters user</li>
                <li>Parameters: id</li>
                <li>Mongoose Query: 
                    app.delete('/users/:Username', (req, res) => {
                        Users.findOneAndRemove({ Username: req.params.Username })
                </li>
                <li>Data expected in request body:</li>
                <p>None</p>
                <li>Data expected in response:</li>
                <p>Text showing the user has been removed</p>
            </ul>


            <h4>Endpoint: '/users/name/:userName'</h4>
            <ul>
                <li>Method: GET</li>
                <li>Logic: Gets user by username</li>
                <li>Parameters: userName</li>
                <li>Mongoose Query: 
                    app.get('/users/:Username', (req, res) => {
                        Users.findOne({username: req.params.Username })
                </li>
                <li>Data expected in request body: None</li>
                <li>Data expected in response: A JSON object of a specific user</li>
            </ul>


            <h4>Endpoint: '/users'</h4>
            <ul>
                <li>Method: GET</li>
                <li>Logic: Gets all users</li>
                <li>Parameters: None</li>
                <li>Mongoose Query: 
                    app.get('/users', (req, res) => {
                        Users.find()
                </li>
                <li>Data expected in request body: None</li>
                <li>Data expected in response: A JSON object containing all users</li>
            </ul>


        
            
        </div>
               
            
    </p>

</body>-->